title: 原理
layout: vbot/page
---

Vbot 基于网页版的微信客户端实现。

## 登录流程

- 微信服务器返回一个会话ID
- 通过会话ID获得二维码
- 轮询手机端是否已经扫描二维码并确认在Web端登录
- 访问登录地址，获得uin和sid
- 初始化微信信息
- 获得所有的好友列表
- 保持与服务器的信息同步
- 获得别人发来的消息
- 向用户发送消息

## 如何能延长挂机时间？

- 保持服务端网络稳定（若断开超过数分钟就会造成 cookie 过期而断开）
- 定时打开手机客户端（每 8~16 小时打开一次）

## 如何获取唯一ID？

因为 web 的限制，无法获取每个账号的唯一ID。在 **每次登录的 session 中**， 都会存在一个唯一的临时ID : username 。平时如果用于客服等场景，建议通过设置备注确保唯一性。